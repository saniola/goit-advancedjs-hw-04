{"version":3,"file":"commonHelpers.js","sources":["../src/js/config.js","../src/js/fetch-images.js","../src/js/main.js"],"sourcesContent":["export const config = {\n  BASE_URL: import.meta.env.VITE_BASE_URL,\n  API_KEY: import.meta.env.VITE_API_KEY\n};\n","import axios from 'axios';\nimport { config } from './config';\n\nexport async function fetchImages({ currentQuery, currentPage }) {\n\tconst { data } = await axios.get(\n\t\t`${config.BASE_URL}?key=${config.API_KEY}&q=${currentQuery}&image_type=photo&orientation=horizontal&safesearch=true&per_page=40&page=${currentPage}`,\n\t);\n\n  return data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchImages } from './fetch-images';\n\nlet currentPage = 1;\nlet currentQuery = '';\nconst searchForm = document.getElementById('search-form');\nconst gallery = document.querySelector('.gallery');\n\nconst loadMoreBtn = document.querySelector('.load-more');\nconst hideLoadMoreBtn = () => loadMoreBtn.classList.add('hide');\nconst showLoadMoreBtn = () => loadMoreBtn.classList.remove('hide');\n\nconst loader = document.querySelector('.loader-wrapper');\nconst showLoader = () => loader.classList.remove('hide');\nconst hideLoader = () => loader.classList.add('hide');\n\nconst lightbox = new SimpleLightbox('.gallery a', {});\n\nsearchForm.addEventListener('submit', async event => {\n\tevent.preventDefault();\n\tgallery.innerHTML = '';\n\tcurrentPage = 1;\n\tcurrentQuery = event.target.searchQuery.value.trim();\n\n  showLoader();\n  hideLoadMoreBtn();\n\n  if (!currentQuery) {\n    iziToast.error({\n      title: 'Error',\n      position: 'topRight',\n      message: 'Please enter a valid search query.',\n    });\n\n    hideLoader();\n\n    return;\n  }\n\n  try {\n    const data = await fetchImages({ currentQuery, currentPage });\n\n    handleData(data);\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      position: 'topRight',\n      message: 'Failed to fetch images. Please try again.',\n    });\n\n    hideLoader();\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n\tcurrentPage += 1;\n  showLoader();\n\n  try {\n    const data = await fetchImages({ currentQuery, currentPage });\n\n    handleData(data);\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      position: 'topRight',\n      message: 'Failed to fetch images. Please try again.',\n    });\n\n    hideLoader();\n  }\n\n  const { height: cardHeight } =\n  gallery.firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: \"smooth\",\n  });\n});\n\nfunction handleData(data) {\n  hideLoader();\n\n  if (data.hits.length === 0) {\n    hideLoadMoreBtn();\n\n    iziToast.info({\n      title: 'Info',\n      position: 'topRight',\n      message:\n        'Sorry, there are no images matching your search query. Please try again.',\n    });\n\n    return;\n  }\n\n  renderGallery(data.hits);\n  showLoadMoreBtn();\n\n  if (currentPage === 1) {\n    iziToast.success({\n      title: 'Success',\n      position: 'topRight',\n      message: `Hooray! We found ${data.totalHits} images.`,\n    });\n  }\n\n  if (data.totalHits <= currentPage * 40) {\n    hideLoadMoreBtn();\n\n    iziToast.info({\n      title: 'Error',\n      position: 'topRight',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  }\n\n  lightbox.refresh();\n}\n\n\nfunction renderGallery(images) {\n\tconst markup = images\n\t\t.map(\n\t\t\timage => `\n    <a href=\"${image.largeImageURL}\" class=\"photo-card\">\n      <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n      <div class=\"info\">\n        <p class=\"info-item\">\n          <i class=\"fas fa-heart\"></i> <b>Likes</b> ${image.likes}\n        </p>\n        <p class=\"info-item\">\n          <i class=\"fas fa-eye\"></i> <b>Views</b> ${image.views}\n        </p>\n        <p class=\"info-item\">\n          <i class=\"fas fa-comment\"></i> <b>Comments</b> ${image.comments}\n        </p>\n        <p class=\"info-item\">\n          <i class=\"fas fa-download\"></i> <b>Downloads</b> ${image.downloads}\n        </p>\n      </div>\n    </a>\n  `,\n\t\t)\n\t\t.join('');\n\n\tgallery.insertAdjacentHTML(\"beforeend\", markup);\n}\n"],"names":["config","fetchImages","currentQuery","currentPage","data","axios","searchForm","gallery","loadMoreBtn","hideLoadMoreBtn","showLoadMoreBtn","loader","showLoader","hideLoader","lightbox","SimpleLightbox","event","iziToast","handleData","cardHeight","renderGallery","images","markup","image"],"mappings":"+vBAAO,MAAMA,EAAS,CACpB,SAAU,2BACV,QAAS,oCACX,ECAO,eAAeC,EAAY,CAAE,aAAAC,EAAc,YAAAC,GAAe,CAChE,KAAM,CAAE,KAAAC,CAAI,EAAK,MAAMC,EAAM,IAC5B,GAAGL,EAAO,QAAQ,QAAQA,EAAO,OAAO,MAAME,CAAY,6EAA6EC,CAAW,EACpJ,EAEE,OAAOC,CACT,CCHA,IAAID,EAAc,EACdD,EAAe,GACnB,MAAMI,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAU,SAAS,cAAc,UAAU,EAE3CC,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAkB,IAAMD,EAAY,UAAU,IAAI,MAAM,EACxDE,EAAkB,IAAMF,EAAY,UAAU,OAAO,MAAM,EAE3DG,EAAS,SAAS,cAAc,iBAAiB,EACjDC,EAAa,IAAMD,EAAO,UAAU,OAAO,MAAM,EACjDE,EAAa,IAAMF,EAAO,UAAU,IAAI,MAAM,EAE9CG,EAAW,IAAIC,EAAe,aAAc,CAAE,CAAA,EAEpDT,EAAW,iBAAiB,SAAU,MAAMU,GAAS,CASnD,GARDA,EAAM,eAAc,EACpBT,EAAQ,UAAY,GACpBJ,EAAc,EACdD,EAAec,EAAM,OAAO,YAAY,MAAM,KAAI,EAEjDJ,IACAH,IAEI,CAACP,EAAc,CACjBe,EAAS,MAAM,CACb,MAAO,QACP,SAAU,WACV,QAAS,oCACf,CAAK,EAEDJ,IAEA,MACD,CAED,GAAI,CACF,MAAMT,EAAO,MAAMH,EAAY,CAAE,aAAAC,EAAc,YAAAC,CAAa,CAAA,EAE5De,EAAWd,CAAI,CAChB,MAAe,CACda,EAAS,MAAM,CACb,MAAO,QACP,SAAU,WACV,QAAS,2CACf,CAAK,EAEDJ,GACD,CACH,CAAC,EAEDL,EAAY,iBAAiB,QAAS,SAAY,CACjDL,GAAe,EACdS,IAEA,GAAI,CACF,MAAMR,EAAO,MAAMH,EAAY,CAAE,aAAAC,EAAc,YAAAC,CAAa,CAAA,EAE5De,EAAWd,CAAI,CAChB,MAAe,CACda,EAAS,MAAM,CACb,MAAO,QACP,SAAU,WACV,QAAS,2CACf,CAAK,EAEDJ,GACD,CAED,KAAM,CAAE,OAAQM,CAAY,EAC5BZ,EAAQ,kBAAkB,wBAE1B,OAAO,SAAS,CACd,IAAKY,EAAa,EAClB,SAAU,QACd,CAAG,CACH,CAAC,EAED,SAASD,EAAWd,EAAM,CAGxB,GAFAS,IAEIT,EAAK,KAAK,SAAW,EAAG,CAC1BK,IAEAQ,EAAS,KAAK,CACZ,MAAO,OACP,SAAU,WACV,QACE,0EACR,CAAK,EAED,MACD,CAEDG,EAAchB,EAAK,IAAI,EACvBM,IAEIP,IAAgB,GAClBc,EAAS,QAAQ,CACf,MAAO,UACP,SAAU,WACV,QAAS,oBAAoBb,EAAK,SAAS,UACjD,CAAK,EAGCA,EAAK,WAAaD,EAAc,KAClCM,IAEAQ,EAAS,KAAK,CACZ,MAAO,QACP,SAAU,WACV,QAAS,4DACf,CAAK,GAGHH,EAAS,QAAO,CAClB,CAGA,SAASM,EAAcC,EAAQ,CAC9B,MAAMC,EAASD,EACb,IACAE,GAAS;AAAA,eACGA,EAAM,aAAa;AAAA,kBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,sDAGFA,EAAM,KAAK;AAAA;AAAA;AAAA,oDAGbA,EAAM,KAAK;AAAA;AAAA;AAAA,2DAGJA,EAAM,QAAQ;AAAA;AAAA;AAAA,6DAGZA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,GAKzE,EACA,KAAK,EAAE,EAEThB,EAAQ,mBAAmB,YAAae,CAAM,CAC/C"}