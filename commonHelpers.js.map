{"version":3,"file":"commonHelpers.js","sources":["../src/js/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst API_KEY = '44527465-372387a79420ecddf2afa63d2';\nconst BASE_URL = 'https://pixabay.com/api/';\nlet currentPage = 1;\nlet currentQuery = '';\nconst searchForm = document.getElementById('search-form');\nconst gallery = document.querySelector('.gallery');\n\nconst loadMoreBtn = document.querySelector('.load-more');\nconst hideLoadMoreBtn = () => loadMoreBtn.classList.add('hide');\nconst showLoadMoreBtn = () => loadMoreBtn.classList.remove('hide');\n\nconst loader = document.querySelector('.loader-wrapper');\nconst showLoader = () => loader.classList.remove('hide');\nconst hideLoader = () => loader.classList.add('hide');\n\nsearchForm.addEventListener('submit', async event => {\n\tevent.preventDefault();\n\tgallery.innerHTML = '';\n\tcurrentPage = 1;\n\tcurrentQuery = event.target.searchQuery.value;\n\tawait fetchImages();\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n\tcurrentPage += 1;\n\tawait fetchImages();\n});\n\nasync function fetchImages() {\n  showLoader();\n  hideLoadMoreBtn();\n\n\ttry {\n\t\tconst response = await fetch(\n\t\t\t`${BASE_URL}?key=${API_KEY}&q=${currentQuery}&image_type=photo&orientation=horizontal&safesearch=true&per_page=40&page=${currentPage}`,\n\t\t);\n\t\tconst data = await response.json();\n\n\t\tif (data.hits.length === 0) {\n      hideLoadMoreBtn();\n\n\t\t\tiziToast.info({\n\t\t\t\ttitle: 'Info',\n        position: 'topRight',\n\t\t\t\tmessage:\n\t\t\t\t\t'Sorry, there are no images matching your search query. Please try again.',\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\trenderGallery(data.hits);\n\t\tshowLoadMoreBtn();\n\n\t\tif (currentPage === 1) {\n\t\t\tiziToast.success({\n\t\t\t\ttitle: 'Success',\n        position: 'topRight',\n\t\t\t\tmessage: `Hooray! We found ${data.totalHits} images.`,\n\t\t\t});\n\t\t}\n\n\t\tif (data.totalHits <= currentPage * 40) {\n\t\t\thideLoadMoreBtn();\n\n\t\t\tiziToast.info({\n\t\t\t\ttitle: 'Error',\n        position: 'topRight',\n\t\t\t\tmessage: \"We're sorry, but you've reached the end of search results.\",\n\t\t\t});\n\t\t}\n\n\t\tconst lightbox = new SimpleLightbox('.gallery a', {});\n\n\t\tlightbox.refresh();\n\t} catch (error) {\n\t\tconsole.error('Error fetching images:', error);\n\t} finally {\n    hideLoader();\n  }\n}\n\nfunction renderGallery(images) {\n\tconst markup = images\n\t\t.map(\n\t\t\t(image) => `\n    <a href=\"${image.largeImageURL}\" class=\"photo-card\">\n      <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n      <div class=\"info\">\n        <p class=\"info-item\">\n          <i class=\"fas fa-heart\"></i> <b>Likes</b> ${image.likes}\n        </p>\n        <p class=\"info-item\">\n          <i class=\"fas fa-eye\"></i> <b>Views</b> ${image.views}\n        </p>\n        <p class=\"info-item\">\n          <i class=\"fas fa-comment\"></i> <b>Comments</b> ${image.comments}\n        </p>\n        <p class=\"info-item\">\n          <i class=\"fas fa-download\"></i> <b>Downloads</b> ${image.downloads}\n        </p>\n      </div>\n    </a>\n  `,\n\t\t)\n\t\t.join(\"\");\n\n\tgallery.insertAdjacentHTML(\"beforeend\", markup);\n\n\tconst { height: cardHeight } =\n\t\tgallery.firstElementChild.getBoundingClientRect();\n\n\twindow.scrollBy({\n\t\ttop: cardHeight * 2,\n\t\tbehavior: \"smooth\",\n\t});\n}\n"],"names":["API_KEY","BASE_URL","currentPage","currentQuery","searchForm","gallery","loadMoreBtn","hideLoadMoreBtn","showLoadMoreBtn","loader","showLoader","hideLoader","event","fetchImages","data","iziToast","renderGallery","SimpleLightbox","error","images","markup","image","cardHeight"],"mappings":"6vBAKA,MAAMA,EAAU,qCACVC,EAAW,2BACjB,IAAIC,EAAc,EACdC,EAAe,GACnB,MAAMC,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAU,SAAS,cAAc,UAAU,EAE3CC,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAkB,IAAMD,EAAY,UAAU,IAAI,MAAM,EACxDE,EAAkB,IAAMF,EAAY,UAAU,OAAO,MAAM,EAE3DG,EAAS,SAAS,cAAc,iBAAiB,EACjDC,EAAa,IAAMD,EAAO,UAAU,OAAO,MAAM,EACjDE,EAAa,IAAMF,EAAO,UAAU,IAAI,MAAM,EAEpDL,EAAW,iBAAiB,SAAU,MAAMQ,GAAS,CACpDA,EAAM,eAAc,EACpBP,EAAQ,UAAY,GACpBH,EAAc,EACdC,EAAeS,EAAM,OAAO,YAAY,MACxC,MAAMC,EAAW,CAClB,CAAC,EAEDP,EAAY,iBAAiB,QAAS,SAAY,CACjDJ,GAAe,EACf,MAAMW,EAAW,CAClB,CAAC,EAED,eAAeA,GAAc,CAC3BH,IACAH,IAED,GAAI,CAIH,MAAMO,EAAO,MAHI,MAAM,MACtB,GAAGb,CAAQ,QAAQD,CAAO,MAAMG,CAAY,6EAA6ED,CAAW,EACvI,GAC8B,OAE5B,GAAIY,EAAK,KAAK,SAAW,EAAG,CACxBP,IAEHQ,EAAS,KAAK,CACb,MAAO,OACH,SAAU,WACd,QACC,0EACL,CAAI,EAED,MACA,CAEDC,EAAcF,EAAK,IAAI,EACvBN,IAEIN,IAAgB,GACnBa,EAAS,QAAQ,CAChB,MAAO,UACH,SAAU,WACd,QAAS,oBAAoBD,EAAK,SAAS,UAC/C,CAAI,EAGEA,EAAK,WAAaZ,EAAc,KACnCK,IAEAQ,EAAS,KAAK,CACb,MAAO,QACH,SAAU,WACd,QAAS,4DACb,CAAI,GAGe,IAAIE,EAAe,aAAc,CAAE,CAAA,EAE3C,QAAO,CAChB,OAAQC,EAAO,CACf,QAAQ,MAAM,yBAA0BA,CAAK,CAC/C,QAAW,CACPP,GACD,CACH,CAEA,SAASK,EAAcG,EAAQ,CAC9B,MAAMC,EAASD,EACb,IACCE,GAAU;AAAA,eACCA,EAAM,aAAa;AAAA,kBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,sDAGFA,EAAM,KAAK;AAAA;AAAA;AAAA,oDAGbA,EAAM,KAAK;AAAA;AAAA;AAAA,2DAGJA,EAAM,QAAQ;AAAA;AAAA;AAAA,6DAGZA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,GAKzE,EACA,KAAK,EAAE,EAEThB,EAAQ,mBAAmB,YAAae,CAAM,EAE9C,KAAM,CAAE,OAAQE,CAAY,EAC3BjB,EAAQ,kBAAkB,wBAE3B,OAAO,SAAS,CACf,IAAKiB,EAAa,EAClB,SAAU,QACZ,CAAE,CACF"}